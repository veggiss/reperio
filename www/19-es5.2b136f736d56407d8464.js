(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"1BKp":function(e,t,n){"use strict";n.r(t);var s=n("CcnG"),a=n("mrSG"),i=n("ZZ/e"),r=n("Z22J"),c=n("ZLgM"),l=n("+TmL"),o=function(e){function t(t){var n=e.call(this,t.scene,0,0,"card")||this;return t.scene.add.existing(n),n.setOrigin(.5,.5),n.setInteractive(),n.flipped=!1,n.posX=t.posX,n.posY=t.posY,n.parent=t.parent,n.answer=t.answer,n.displayWidth=n.parent.displayWidth/2,n.displayHeight=n.parent.displayHeight/2,n.firstCell={x:n.parent.x-(n.parent.displayWidth/2+n.displayWidth/2),y:n.parent.y-(n.parent.displayHeight/2+n.displayHeight/2)},n.x=n.firstCell.x+n.displayWidth*n.posX,n.y=n.firstCell.y+n.displayHeight*n.posY,n.outOfBounds=t.scene.game.canvas.width+n.displayWidth,n.setScale(.9*n.scaleX,.9*n.scaleY),n.originScaleX=n.scaleX,n.originScaleY=n.scaleY,n.image=t.scene.add.sprite(n.x,n.y,t.image),n.image.setOrigin(.5,.5),n.image.displayWidth=n.displayWidth,n.image.displayHeight=n.displayHeight,n.image.alpha=0,n.killme=function(){n.destroy(),n.image.destroy()},n.tweenIn=function(){return n.scene.tweens.add({paused:!0,targets:[n,n.image],y:{from:function(){return-n.displayHeight},to:n.y},ease:"Cubic.InOut",duration:1e3})},n.flip=function(){return n.scene.tweens.add({paused:!0,targets:n,scaleX:{from:n.scaleX,to:0},scaleY:{from:n.scaleY,to:n.scaleY+.2},onComplete:function(){n.flipped?(n.image.alpha=0,n.flipped=!1):(n.image.alpha=1,n.flipped=!0),n.flipBack().play()},onUpdate:function(){n.image.displayWidth=n.displayWidth,n.image.displayHeight=n.displayHeight},ease:"Linear.None",duration:50})},n.flipBack=function(){return n.scene.tweens.add({paused:!0,targets:n,scaleX:{from:n.scaleX,to:n.originScaleX},scaleY:{from:n.scaleY,to:n.originScaleY},onUpdate:function(){n.image.displayWidth=n.displayWidth,n.image.displayHeight=n.displayHeight},ease:"Linear.None",duration:50})},n.on("pointerdown",(function(){var e=t.scene.getState();if("idle"==e)n.flip().play(),t.scene.setLastClicked(n),t.scene.setAnswer(n.answer),t.scene.flipWordCards(!0);else if("guessing_image"==e){if(t.scene.getAnswer()===n.answer){t.scene.getLastClicked().killme(),n.killme();var s=t.scene.getCorrectAnswers()+1;t.scene.setCorrectAnswers(s),t.scene.checkCardsAnswers()}else s=t.scene.getCorrectAnswers()-1,t.scene.setCorrectAnswers(s);t.scene.flipWordCards(!1),t.scene.flipImageCards(!1)}})),n}return a.d(t,e),t}(c.GameObjects.Sprite),p=function(e){function t(t){var n=e.call(this,t.scene,0,0,"card")||this;return t.scene.add.existing(n),n.setOrigin(.5,.5),n.pos=t.pos,n.parent=t.parent,n.setInteractive(),n.displayWidth=n.parent.displayWidth,n.displayHeight=n.parent.displayHeight/4,n.firstCell={y:n.parent.y-(n.parent.displayHeight/2-n.displayHeight/2)},n.x=n.scene.cameras.main.centerX,n.y=n.firstCell.y+n.displayHeight*n.pos,n.setScale(.95*n.scaleX,.9*n.scaleY),n.originScaleX=n.scaleX,n.originScaleY=n.scaleY,n.scaleText=function(){n.text.displayWidth>=n.displayWidth-.1*n.displayWidth?(n.text.displayWidth=n.displayWidth-.1*n.displayWidth,n.text.scaleY=n.text.scaleX):n.text.scale=n.scale},n.killme=function(){n.destroy(),n.text.destroy()},n.text=n.scene.make.text({add:!0,x:n.x,y:n.y,origin:.5,alpha:0,text:t.text,style:{fontSize:"48px",fontFamily:"Arial",color:"#000000",align:"center"}}),n.scaleText(),n.tweenIn=function(){return n.scene.tweens.add({paused:!0,targets:[n,n.text],y:{from:function(){return t.scene.game.canvas.height+n.displayHeight},to:n.y},ease:"Cubic.InOut",duration:1e3})},n.flip=function(){return n.scene.tweens.add({paused:!0,targets:n,scaleY:{from:n.scaleY,to:0},scaleX:{from:n.scaleX,to:n.scaleX+.1},onComplete:function(){n.flipped?(n.setTexture("card"),n.flipped=!1):(n.setTexture("card_bgr"),n.flipped=!0),n.flipBack().play()},ease:"Linear.None",duration:50})},n.flipBack=function(){return n.scene.tweens.add({paused:!0,targets:n,scaleY:{from:n.scaleY,to:n.originScaleY},scaleX:{from:n.scaleX,to:n.originScaleX},ease:"Linear.None",duration:50,onComplete:function(){n.text.alpha=0==n.text.alpha?1:0}})},n.on("pointerdown",(function(){var e=t.scene.getState();if("idle"==e)n.flip().play(),t.scene.setLastClicked(n),t.scene.setAnswer(n.text.text),t.scene.flipImageCards(!0);else if("guessing_word"==e){if(t.scene.getAnswer()===n.text.text){t.scene.getLastClicked().killme(),n.killme();var s=t.scene.getCorrectAnswers()+1;t.scene.setCorrectAnswers(s),t.scene.checkCardsAnswers()}else s=t.scene.getCorrectAnswers()-1,t.scene.setCorrectAnswers(s);t.scene.flipWordCards(!1),t.scene.flipImageCards(!1)}})),n}return a.d(t,e),t}(c.GameObjects.Sprite),d=function(e){function t(t){var n=e.call(this,t.scene,0,0,"card_bgr")||this;return n.alpha=0,n.displayHeight=.5*n.scene.game.canvas.height,n.displayWidth=n.displayHeight,n.setOrigin(.5,.5),n.x=n.scene.cameras.main.centerX,n.y=n.displayHeight/2+.1*n.displayHeight,t.scene.add.existing(n),n}return a.d(t,e),t}(c.GameObjects.Sprite),u=function(e){function t(t){var n=e.call(this,t.scene,0,0,"card_bgr")||this;return n.alpha=0,n.displayWidth=.5*n.scene.game.canvas.height,n.displayHeight=.35*n.scene.game.canvas.height,n.setOrigin(.5,.5),n.x=n.scene.cameras.main.centerX,n.y=n.scene.game.canvas.height-n.displayHeight/2-.1*n.displayHeight,t.scene.add.existing(n),n}return a.d(t,e),t}(c.GameObjects.Sprite),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.category="musikk",t.round=0,t.rounds=1,t.roundData=Object(l.h)(t.category,[],l.e,4*t.rounds),t.imageCards=[],t.wordCards=[],t.states=["animating","idle","guessing_image","guessing_word"],t.state=t.states[0],t.cardsAnswered=0,t.correctAnswers=0,t.getState=function(){return t.state},t.setState=function(e){return t.state=e},t.setAnswer=function(e){return t.answer=e},t.getCorrectAnswers=function(){return t.correctAnswers},t.setCorrectAnswers=function(e){return t.correctAnswers=e},t.getAnswer=function(){return t.answer},t.checkCardsAnswers=function(){t.cardsAnswered++,4==t.cardsAnswered&&(t.round++,t.cardsAnswered=0,t.round<t.rounds?(t.roundData.splice(0,4),t.imageCards=[],t.wordCards=[],t.loadImageCards()):(console.log(t.correctAnswers,4*t.rounds),Object(l.d)(t.correctAnswers,4*t.rounds,"lese"),document.getElementById("goBackBtn").click()))},t.setLastClicked=function(e){return t.lastClickedElement=e},t.getLastClicked=function(){return t.lastClickedElement},t}return a.d(t,e),t.prototype.preload=function(){var e=this;this.load.image("alternative","assets/img/alternative.png"),this.load.image("card_bgr","assets/img/games/flipper/card_bgr.png"),this.load.image("wood_bgr","assets/img/games/flipper/wood_bgr.png"),this.load.image("paper_bgr","assets/img/games/flipper/paper_bgr.png"),this.load.image("coffee_cup","assets/img/games/flipper/coffee_cup.png"),this.load.image("card","assets/img/games/flipper/card.png"),this.load.image("bg_tile","assets/img/games/flipper/bg_tile.png"),this.roundData.forEach((function(t,n){return e.load.image("image_"+n,"assets/img/games/images/vost/"+t.src)}))},t.prototype.init=function(){this.cameras.main.setBackgroundColor("#E9E1CF"),console.log(this.roundData)},t.prototype.create=function(){this.bgSprite=this.add.tileSprite(0,0,this.game.canvas.width*window.devicePixelRatio,this.game.canvas.height*window.devicePixelRatio,"bg_tile"),this.loadImageCards()},t.prototype.loadImageCards=function(){var e=this;this.imageCardBg=new d({scene:this}),this.wordCardBg=new u({scene:this});for(var t=0,n=1;n<=2;n++)for(var s=1;s<=2;s++){var a=new o({scene:this,parent:this.imageCardBg,upper:!0,posX:s,posY:n,image:"image_"+(this.round*this.rounds+t),answer:this.roundData[t].answer,pos:t});this.imageCards.push(a),t++}Object(l.k)(this.imageCards).forEach((function(t,n){var s=new p({scene:e,parent:e.wordCardBg,pos:n,text:t.answer});e.wordCards.push(s)}));var i=this.imageCards.map((function(e){return e.tweenIn()})),r=this.wordCards.map((function(e){return e.tweenIn()}));i.forEach((function(t){return t.once("complete",(function(){return e.state=e.states[1]}))})),i.forEach((function(e){return e.play()})),r.forEach((function(e){return e.play()}))},t.prototype.flipImageCards=function(e){this.state=e?this.states[2]:this.states[1],this.imageCards.forEach((function(t){t.active&&(e?t.flipped||t.flip().play():t.flipped&&t.flip().play())}))},t.prototype.flipWordCards=function(e){this.state=e?this.states[3]:this.states[1],this.wordCards.forEach((function(t){t.active&&(e?t.flipped||t.flip().play():t.flipped&&t.flip().play())}))},t.prototype.update=function(){},t}(c.Scene),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.d(t,e),t.prototype.create=function(){this.scene.add("main",g,!0)},t.prototype.pause=function(){this.scene.pause()},t}(c.Scene),f=function(){function e(e,t){this.popoverController=e,this.navCtrl=t,this.initialize=!0,this.game={width:"100%",height:"100%",type:c.WEBGL,scene:h,instance:null,fps:{target:60,min:60,forceSetTimeOut:!0}}}return e.prototype.presentPopover=function(){return a.b(this,void 0,void 0,(function(){return a.e(this,(function(e){switch(e.label){case 0:return[4,this.popoverController.create({component:r.a})];case 1:return[4,e.sent().present()];case 2:return[2,e.sent()]}}))}))},e.prototype.getInstance=function(){return this.game.instance},e.prototype.goBack=function(){this.navCtrl.back()},e.prototype.pauseGame=function(){this.getInstance().scene.pause("FirstScene")},e.prototype.changeAngle=function(){this.getInstance().scene.scenes.forEach((function(e){e.sys.isActive()&&e.setAngle(0)}))},e}(),m=function(){return function(){}}(),y=n("pMnS"),C=n("oBZk"),w=s.qb({encapsulation:0,styles:[[""]],data:{}});function b(e){return s.Ib(0,[(e()(),s.sb(0,0,null,null,0,"div",[["hidden",""],["id","goBackBtn"],["style",""]],null,[[null,"click"]],(function(e,t,n){var s=!0;return"click"===t&&(s=!1!==e.component.goBack()&&s),s}),null,null)),(e()(),s.sb(1,0,null,null,0,"ion-phaser",[],[[8,"game",0],[8,"initialize",0]],null,null,null,null)),(e()(),s.sb(2,0,null,null,3,"ion-fab",[["horizontal","end"],["vertical","top"]],null,null,null,C.D,C.i)),s.rb(3,49152,null,0,i.u,[s.h,s.k,s.z],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(e()(),s.sb(4,0,null,0,1,"ion-icon",[["color","light"],["name","pause"],["style","font-size: 25px;"]],null,[[null,"click"]],(function(e,t,n){var s=!0;return"click"===t&&(s=!1!==e.component.presentPopover()&&s),s}),C.G,C.l)),s.rb(5,49152,null,0,i.A,[s.h,s.k,s.z],{color:[0,"color"],name:[1,"name"]},null)],(function(e,t){e(t,3,0,"end","top"),e(t,5,0,"light","pause")}),(function(e,t){var n=t.component;e(t,1,0,n.game,n.initialize)}))}function v(e){return s.Ib(0,[(e()(),s.sb(0,0,null,null,1,"app-flipper",[],null,null,null,b,w)),s.rb(1,49152,null,0,f,[i.Hb,i.Fb],null,null)],null,null)}var k=s.ob("app-flipper",f,v,{},{},[]),x=n("Ip0R"),A=n("gIcY"),H=n("ZYCi");n.d(t,"FlipperPageModuleNgFactory",(function(){return S}));var S=s.pb(m,[],(function(e){return s.Bb([s.Cb(512,s.j,s.ab,[[8,[y.a,k]],[3,s.j],s.x]),s.Cb(4608,x.k,x.j,[s.u,[2,x.r]]),s.Cb(4608,A.c,A.c,[]),s.Cb(4608,i.a,i.a,[s.z,s.g]),s.Cb(4608,i.Eb,i.Eb,[i.a,s.j,s.q]),s.Cb(4608,i.Hb,i.Hb,[i.a,s.j,s.q]),s.Cb(1073742336,x.b,x.b,[]),s.Cb(1073742336,A.b,A.b,[]),s.Cb(1073742336,A.a,A.a,[]),s.Cb(1073742336,i.Cb,i.Cb,[]),s.Cb(1073742336,H.n,H.n,[[2,H.s],[2,H.m]]),s.Cb(1073742336,m,m,[]),s.Cb(1024,H.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);