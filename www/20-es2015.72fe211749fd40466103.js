(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"1BKp":function(s,e,t){"use strict";t.r(e);var i=t("8Y7J"),a=t("mrSG"),h=t("ZZ/e"),n=t("Z22J"),r=t("ZLgM"),l=t("+TmL");class c extends r.GameObjects.Sprite{constructor(s){return super(s.scene,0,0,"card"),s.scene.add.existing(this),this.setOrigin(.5,.5),this.setInteractive(),this.flipped=!1,this.posX=s.posX,this.posY=s.posY,this.parent=s.parent,this.answer=s.answer,this.displayWidth=this.parent.displayWidth/2,this.displayHeight=this.parent.displayHeight/2,this.firstCell={x:this.parent.x-(this.parent.displayWidth/2+this.displayWidth/2),y:this.parent.y-(this.parent.displayHeight/2+this.displayHeight/2)},this.x=this.firstCell.x+this.displayWidth*this.posX,this.y=this.firstCell.y+this.displayHeight*this.posY,this.outOfBounds=s.scene.game.canvas.width+this.displayWidth,this.setScale(.9*this.scaleX,.9*this.scaleY),this.originScaleX=this.scaleX,this.originScaleY=this.scaleY,this.image=s.scene.add.sprite(this.x,this.y,s.image),this.image.setOrigin(.5,.5),this.image.displayWidth=this.displayWidth,this.image.displayHeight=this.displayHeight,this.image.alpha=0,this.killme=()=>{this.destroy(),this.image.destroy()},this.tweenIn=()=>this.scene.tweens.add({paused:!0,targets:[this,this.image],y:{from:()=>-this.displayHeight,to:this.y},ease:"Cubic.InOut",duration:1e3}),this.flip=()=>this.scene.tweens.add({paused:!0,targets:this,scaleX:{from:this.scaleX,to:0},scaleY:{from:this.scaleY,to:this.scaleY+.2},onComplete:()=>{this.flipped?(this.image.alpha=0,this.flipped=!1):(this.image.alpha=1,this.flipped=!0),this.flipBack().play()},onUpdate:()=>{this.image.displayWidth=this.displayWidth,this.image.displayHeight=this.displayHeight},ease:"Linear.None",duration:50}),this.flipBack=()=>this.scene.tweens.add({paused:!0,targets:this,scaleX:{from:this.scaleX,to:this.originScaleX},scaleY:{from:this.scaleY,to:this.originScaleY},onUpdate:()=>{this.image.displayWidth=this.displayWidth,this.image.displayHeight=this.displayHeight},ease:"Linear.None",duration:50}),this.on("pointerdown",()=>{let e=s.scene.getState();if("idle"==e)this.flip().play(),s.scene.setLastClicked(this),s.scene.setAnswer(this.answer),s.scene.flipWordCards(!0);else if("guessing_image"==e){if(s.scene.getAnswer()===this.answer){s.scene.getLastClicked().killme(),this.killme();let e=s.scene.getCorrectAnswers()+1;s.scene.setCorrectAnswers(e),s.scene.checkCardsAnswers()}else{let e=s.scene.getCorrectAnswers()-1;s.scene.setCorrectAnswers(e)}s.scene.flipWordCards(!1),s.scene.flipImageCards(!1)}}),this}}class d extends r.GameObjects.Sprite{constructor(s){return super(s.scene,0,0,"card"),s.scene.add.existing(this),this.setOrigin(.5,.5),this.pos=s.pos,this.parent=s.parent,this.setInteractive(),this.displayWidth=this.parent.displayWidth,this.displayHeight=this.parent.displayHeight/4,this.firstCell={y:this.parent.y-(this.parent.displayHeight/2-this.displayHeight/2)},this.x=this.scene.cameras.main.centerX,this.y=this.firstCell.y+this.displayHeight*this.pos,this.setScale(.95*this.scaleX,.9*this.scaleY),this.originScaleX=this.scaleX,this.originScaleY=this.scaleY,this.scaleText=()=>{this.text.displayWidth>=this.displayWidth-.1*this.displayWidth?(this.text.displayWidth=this.displayWidth-.1*this.displayWidth,this.text.scaleY=this.text.scaleX):this.text.scale=this.scale},this.killme=()=>{this.destroy(),this.text.destroy()},this.text=this.scene.make.text({add:!0,x:this.x,y:this.y,origin:.5,alpha:0,text:s.text,style:{fontSize:"48px",fontFamily:"Arial",color:"#000000",align:"center"}}),this.scaleText(),this.tweenIn=()=>this.scene.tweens.add({paused:!0,targets:[this,this.text],y:{from:()=>s.scene.game.canvas.height+this.displayHeight,to:this.y},ease:"Cubic.InOut",duration:1e3}),this.flip=()=>this.scene.tweens.add({paused:!0,targets:this,scaleY:{from:this.scaleY,to:0},scaleX:{from:this.scaleX,to:this.scaleX+.1},onComplete:()=>{this.flipped?(this.setTexture("card"),this.flipped=!1):(this.setTexture("card_bgr"),this.flipped=!0),this.flipBack().play()},ease:"Linear.None",duration:50}),this.flipBack=()=>this.scene.tweens.add({paused:!0,targets:this,scaleY:{from:this.scaleY,to:this.originScaleY},scaleX:{from:this.scaleX,to:this.originScaleX},ease:"Linear.None",duration:50,onComplete:()=>{this.text.alpha=0==this.text.alpha?1:0}}),this.on("pointerdown",()=>{let e=s.scene.getState();if("idle"==e)this.flip().play(),s.scene.setLastClicked(this),s.scene.setAnswer(this.text.text),s.scene.flipImageCards(!0);else if("guessing_word"==e){if(s.scene.getAnswer()===this.text.text){s.scene.getLastClicked().killme(),this.killme();let e=s.scene.getCorrectAnswers()+1;s.scene.setCorrectAnswers(e),s.scene.checkCardsAnswers()}else{let e=s.scene.getCorrectAnswers()-1;s.scene.setCorrectAnswers(e)}s.scene.flipWordCards(!1),s.scene.flipImageCards(!1)}}),this}}class o extends r.GameObjects.Sprite{constructor(s){return super(s.scene,0,0,"card_bgr"),this.alpha=0,this.displayHeight=.5*this.scene.game.canvas.height,this.displayWidth=this.displayHeight,this.setOrigin(.5,.5),this.x=this.scene.cameras.main.centerX,this.y=this.displayHeight/2+.1*this.displayHeight,s.scene.add.existing(this),this}}class p extends r.GameObjects.Sprite{constructor(s){return super(s.scene,0,0,"card_bgr"),this.alpha=0,this.displayWidth=.5*this.scene.game.canvas.height,this.displayHeight=.35*this.scene.game.canvas.height,this.setOrigin(.5,.5),this.x=this.scene.cameras.main.centerX,this.y=this.scene.game.canvas.height-this.displayHeight/2-.1*this.displayHeight,s.scene.add.existing(this),this}}class g extends r.Scene{constructor(){super(...arguments),this.category="musikk",this.round=0,this.rounds=1,this.roundData=Object(l.h)(this.category,[],l.e,4*this.rounds),this.imageCards=[],this.wordCards=[],this.states=["animating","idle","guessing_image","guessing_word"],this.state=this.states[0],this.cardsAnswered=0,this.correctAnswers=0,this.getState=()=>this.state,this.setState=s=>this.state=s,this.setAnswer=s=>this.answer=s,this.getCorrectAnswers=()=>this.correctAnswers,this.setCorrectAnswers=s=>this.correctAnswers=s,this.getAnswer=()=>this.answer,this.checkCardsAnswers=()=>{this.cardsAnswered++,4==this.cardsAnswered&&(this.round++,this.cardsAnswered=0,this.round<this.rounds?(this.roundData.splice(0,4),this.imageCards=[],this.wordCards=[],this.loadImageCards()):(console.log(this.correctAnswers,4*this.rounds),Object(l.d)(this.correctAnswers,4*this.rounds,"lese"),document.getElementById("goBackBtn").click()))},this.setLastClicked=s=>this.lastClickedElement=s,this.getLastClicked=()=>this.lastClickedElement}preload(){this.load.image("alternative","assets/img/alternative.png"),this.load.image("card_bgr","assets/img/games/flipper/card_bgr.png"),this.load.image("wood_bgr","assets/img/games/flipper/wood_bgr.png"),this.load.image("paper_bgr","assets/img/games/flipper/paper_bgr.png"),this.load.image("coffee_cup","assets/img/games/flipper/coffee_cup.png"),this.load.image("card","assets/img/games/flipper/card.png"),this.load.image("bg_tile","assets/img/games/flipper/bg_tile.png"),this.roundData.forEach((s,e)=>this.load.image(`image_${e}`,`assets/img/games/images/vost/${s.src}`))}init(){this.cameras.main.setBackgroundColor("#E9E1CF"),console.log(this.roundData)}create(){this.bgSprite=this.add.tileSprite(0,0,this.game.canvas.width*window.devicePixelRatio,this.game.canvas.height*window.devicePixelRatio,"bg_tile"),this.loadImageCards()}loadImageCards(){this.imageCardBg=new o({scene:this}),this.wordCardBg=new p({scene:this});let s=0;for(let i=1;i<=2;i++)for(let e=1;e<=2;e++){let t=new c({scene:this,parent:this.imageCardBg,upper:!0,posX:e,posY:i,image:"image_"+(this.round*this.rounds+s),answer:this.roundData[s].answer,pos:s});this.imageCards.push(t),s++}Object(l.k)(this.imageCards).forEach((s,e)=>{let t=new d({scene:this,parent:this.wordCardBg,pos:e,text:s.answer});this.wordCards.push(t)});let e=this.imageCards.map(s=>s.tweenIn()),t=this.wordCards.map(s=>s.tweenIn());e.forEach(s=>s.once("complete",()=>this.state=this.states[1])),e.forEach(s=>s.play()),t.forEach(s=>s.play())}flipImageCards(s){this.state=s?this.states[2]:this.states[1],this.imageCards.forEach(e=>{e.active&&(s?e.flipped||e.flip().play():e.flipped&&e.flip().play())})}flipWordCards(s){this.state=s?this.states[3]:this.states[1],this.wordCards.forEach(e=>{e.active&&(s?e.flipped||e.flip().play():e.flipped&&e.flip().play())})}update(){}}class u extends r.Scene{create(){this.scene.add("main",g,!0)}pause(){this.scene.pause()}}class m{constructor(s,e){this.popoverController=s,this.navCtrl=e,this.initialize=!0,this.game={width:"100%",height:"100%",type:r.WEBGL,scene:u,instance:null,fps:{target:60,min:60,forceSetTimeOut:!0}}}presentPopover(){return a.b(this,void 0,void 0,(function*(){const s=yield this.popoverController.create({component:n.a});return yield s.present()}))}getInstance(){return this.game.instance}goBack(){this.navCtrl.back()}pauseGame(){this.getInstance().scene.pause("FirstScene")}changeAngle(){this.getInstance().scene.scenes.forEach(s=>{s.sys.isActive()&&s.setAngle(0)})}}class f{}var y=t("pMnS"),w=t("oBZk"),b=i.ob({encapsulation:0,styles:[[""]],data:{}});function C(s){return i.Gb(0,[(s()(),i.qb(0,0,null,null,0,"div",[["hidden",""],["id","goBackBtn"],["style",""]],null,[[null,"click"]],(function(s,e,t){var i=!0;return"click"===e&&(i=!1!==s.component.goBack()&&i),i}),null,null)),(s()(),i.qb(1,0,null,null,0,"ion-phaser",[],[[8,"game",0],[8,"initialize",0]],null,null,null,null)),(s()(),i.qb(2,0,null,null,3,"ion-fab",[["horizontal","end"],["vertical","top"]],null,null,null,w.D,w.i)),i.pb(3,49152,null,0,h.u,[i.h,i.k,i.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(s()(),i.qb(4,0,null,0,1,"ion-icon",[["color","light"],["name","pause"],["style","font-size: 25px;"]],null,[[null,"click"]],(function(s,e,t){var i=!0;return"click"===e&&(i=!1!==s.component.presentPopover()&&i),i}),w.G,w.l)),i.pb(5,49152,null,0,h.A,[i.h,i.k,i.x],{color:[0,"color"],name:[1,"name"]},null)],(function(s,e){s(e,3,0,"end","top"),s(e,5,0,"light","pause")}),(function(s,e){var t=e.component;s(e,1,0,t.game,t.initialize)}))}function x(s){return i.Gb(0,[(s()(),i.qb(0,0,null,null,1,"app-flipper",[],null,null,null,C,b)),i.pb(1,49152,null,0,m,[h.Hb,h.Fb],null,null)],null,null)}var A=i.mb("app-flipper",m,x,{},{},[]),k=t("SVse"),v=t("s7LF"),H=t("iInd");t.d(e,"FlipperPageModuleNgFactory",(function(){return S}));var S=i.nb(f,[],(function(s){return i.zb([i.Ab(512,i.j,i.Y,[[8,[y.a,A]],[3,i.j],i.v]),i.Ab(4608,k.k,k.j,[i.s,[2,k.r]]),i.Ab(4608,v.c,v.c,[]),i.Ab(4608,h.a,h.a,[i.x,i.g]),i.Ab(4608,h.Eb,h.Eb,[h.a,i.j,i.p]),i.Ab(4608,h.Hb,h.Hb,[h.a,i.j,i.p]),i.Ab(1073742336,k.b,k.b,[]),i.Ab(1073742336,v.b,v.b,[]),i.Ab(1073742336,v.a,v.a,[]),i.Ab(1073742336,h.Cb,h.Cb,[]),i.Ab(1073742336,H.n,H.n,[[2,H.s],[2,H.m]]),i.Ab(1073742336,f,f,[]),i.Ab(1024,H.k,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);