(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{NzNT:function(t,e,i){"use strict";i.r(e);var s=i("8Y7J"),a=i("mrSG"),l=i("ZZ/e"),n=i("Z22J"),h=i("ZLgM"),c=i("+TmL");class o extends h.GameObjects.Sprite{constructor(t){super(t.scene,0,0,"book_open"),this.x=this.scene.cameras.main.centerX,this.y=this.scene.cameras.main.centerY,this.setOrigin(.5,.5);let e=t.scene.game.canvas.height;return this.displayWidth=.9*t.scene.game.canvas.width,this.scaleY=this.scaleX,this.displayHeight>.9*e&&(this.displayHeight=.9*e,this.scaleX=this.scaleY),t.scene.add.existing(this),this.correctAltBoxes=[],this.image=t.scene.add.sprite(0,0,"test_image"),this.image.displayWidth=.25*this.displayWidth,this.image.scaleY=this.image.scaleX,this.image.x=this.x-.25*this.displayWidth,this.image.y=this.y-.25*this.displayHeight,this.textBgLeft=t.scene.add.sprite(this.image.x,0,null),this.textBgLeft.setOrigin(.5,.5),this.textBgLeft.displayWidth=.4*this.displayWidth,this.textBgLeft.displayHeight=.4*this.displayHeight,this.textBgLeft.y=this.image.y+.275*this.displayWidth,this.textBgLeft.visible=!1,this.textBgRight=t.scene.add.sprite(this.x+this.displayWidth/4.5,this.y-this.displayHeight/4,null),this.textBgRight.setOrigin(.5,.5),this.textBgRight.displayWidth=this.textBgLeft.displayWidth,this.textBgRight.displayHeight=this.textBgLeft.displayHeight,this.textBgRight.visible=!1,this.scaleText=t=>{t.displayHeight=this.textBgLeft.displayHeight/5,t.scaleX=t.scaleY},this.spacer=this.scene.make.text({add:!1,x:this.textBgLeft.x-this.textBgLeft.displayWidth/2,y:this.textBgLeft.y-this.textBgLeft.displayHeight/2,alpha:0,origin:0,text:" ",style:{fontSize:"48px",fontFamily:"Arial",color:"#000000",align:"center"}}),this.scaleText(this.spacer),this.leftAlternatives(t),this.rightAlternatives(t),this}leftAlternatives(t){let e=0,i=0,s=0;t.data.sentence.split(" ").forEach(a=>{let l,n=!1;"_"==a?(n=!0,l=t.data.correct[s++]):l=a;let h=this.scene.make.text({x:this.textBgLeft.x-this.textBgLeft.displayWidth/2+e,y:this.textBgLeft.y-this.textBgLeft.displayHeight/2+i,origin:0,text:l,style:{fontSize:"48px",fontFamily:"Arial",color:"#000000",align:"center"}});if(this.scaleText(h),e+h.displayWidth>this.textBgLeft.displayWidth&&(e=0,h.y=this.textBgLeft.y-this.textBgLeft.displayHeight/2+(i+=h.displayHeight+h.displayHeight/2),h.x=this.textBgLeft.x-this.textBgLeft.displayWidth/2+e),n){let e=t.scene.add.sprite(h.x,h.y,"alternative");e.setOrigin(0),e.displayWidth=h.displayWidth,e.displayHeight=h.displayHeight,e.word=h.text,this.correctAltBoxes.push(e)}e+=h.displayWidth+this.spacer.displayWidth})}rightAlternatives(t){let e=Object(c.k)(t.data.correct.concat(t.data.wrong)),i=[],s=0,a=0,l=0;e.forEach(e=>{let n=this.scene.make.text({x:this.textBgRight.x-this.textBgRight.displayWidth/2+a,y:this.textBgRight.y-this.textBgRight.displayHeight/2+l,guessed:!1,origin:0,text:e,style:{border:"10px solid black",fontSize:"48px",fontFamily:"Arial",color:"#000000",align:"center"}});n.setInteractive(),this.scaleText(n),a+n.displayWidth>this.textBgRight.displayWidth&&(a=0,n.y=this.textBgRight.y-this.textBgRight.displayHeight/2+(l+=n.displayHeight+n.displayHeight/2),n.x=this.textBgRight.x-this.textBgRight.displayWidth/2+a);let h=t.scene.add.graphics();h.lineStyle(3,"#000000"),h.moveTo(n.x,n.y+n.displayHeight/2),h.lineTo(n.x+n.displayWidth,n.y+n.displayHeight/2),h.strokePath(),h.alpha=0,i.push(h),n.on("pointerdown",()=>{n.guessed||(n.text==this.correctAltBoxes[0].word?(n.setColor("green"),this.correctAltBoxes[0].alpha=0,this.correctAltBoxes.shift(),n.guessed=!0,i.forEach(t=>t.alpha=0),0==this.correctAltBoxes.length&&(Object(c.d)(3,s,"skrive"),document.getElementById("goBackBtn").click())):(s++,h.alpha=1))}),a+=n.displayWidth+this.spacer.displayWidth})}}class g extends h.Scene{constructor(){super(...arguments),this.roundData=Object(c.g)("",[],c.e,1)}preload(){this.load.image("bg_tile","assets/img/games/album/bg_tile.png"),this.load.image("book_open","assets/img/games/album/book_open.png"),this.load.image("polaroid","assets/img/games/match/polaroid.png"),this.load.image("test_image","assets/img/games/images/album/"+this.roundData[0].src),this.load.image("alternative","assets/img/alternative.png")}init(){this.scale.lockOrientation("landscape"),this.scale.updateOrientation()}create(){this.bgSprite=this.add.tileSprite(0,0,this.game.canvas.width*window.devicePixelRatio,this.game.canvas.height*window.devicePixelRatio,"bg_tile"),this.book=new o({scene:this,data:this.roundData[0]})}update(){}}class r extends h.Scene{create(){this.scene.add("main",g,!0)}pause(){this.scene.pause()}}class d{constructor(t,e){this.popoverController=t,this.navCtrl=e,this.initialize=!0,this.game={width:"100%",height:"100%",type:h.WEBGL,scene:r,instance:null,fps:{target:60,min:60,forceSetTimeOut:!0}}}presentPopover(){return a.b(this,void 0,void 0,(function*(){const t=yield this.popoverController.create({component:n.a});return yield t.present()}))}getInstance(){return this.game.instance}goBack(){this.navCtrl.back()}pauseGame(){this.getInstance().scene.pause("FirstScene")}changeAngle(){this.getInstance().scene.scenes.forEach(t=>{t.sys.isActive()&&t.setAngle(0)})}}class p{}var u=i("pMnS"),x=i("oBZk"),y=s.ob({encapsulation:0,styles:[[""]],data:{}});function m(t){return s.Gb(0,[(t()(),s.qb(0,0,null,null,0,"div",[["hidden",""],["id","goBackBtn"],["style",""]],null,[[null,"click"]],(function(t,e,i){var s=!0;return"click"===e&&(s=!1!==t.component.goBack()&&s),s}),null,null)),(t()(),s.qb(1,0,null,null,0,"ion-phaser",[["class","noZoom"]],[[8,"game",0],[8,"initialize",0]],null,null,null,null)),(t()(),s.qb(2,0,null,null,3,"ion-fab",[["horizontal","end"],["vertical","top"]],null,null,null,x.D,x.i)),s.pb(3,49152,null,0,l.u,[s.h,s.k,s.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(t()(),s.qb(4,0,null,0,1,"ion-icon",[["color","light"],["name","pause"],["style","font-size: 25px;"]],null,[[null,"click"]],(function(t,e,i){var s=!0;return"click"===e&&(s=!1!==t.component.presentPopover()&&s),s}),x.G,x.l)),s.pb(5,49152,null,0,l.A,[s.h,s.k,s.x],{color:[0,"color"],name:[1,"name"]},null)],(function(t,e){t(e,3,0,"end","top"),t(e,5,0,"light","pause")}),(function(t,e){var i=e.component;t(e,1,0,i.game,i.initialize)}))}function b(t){return s.Gb(0,[(t()(),s.qb(0,0,null,null,1,"app-album",[],null,null,null,m,y)),s.pb(1,49152,null,0,d,[l.Hb,l.Fb],null,null)],null,null)}var f=s.mb("app-album",d,b,{},{},[]),B=i("SVse"),v=i("s7LF"),A=i("iInd");i.d(e,"AlbumPageModuleNgFactory",(function(){return k}));var k=s.nb(p,[],(function(t){return s.zb([s.Ab(512,s.j,s.Y,[[8,[u.a,f]],[3,s.j],s.v]),s.Ab(4608,B.k,B.j,[s.s,[2,B.r]]),s.Ab(4608,v.c,v.c,[]),s.Ab(4608,l.a,l.a,[s.x,s.g]),s.Ab(4608,l.Eb,l.Eb,[l.a,s.j,s.p]),s.Ab(4608,l.Hb,l.Hb,[l.a,s.j,s.p]),s.Ab(1073742336,B.b,B.b,[]),s.Ab(1073742336,v.b,v.b,[]),s.Ab(1073742336,v.a,v.a,[]),s.Ab(1073742336,l.Cb,l.Cb,[]),s.Ab(1073742336,A.n,A.n,[[2,A.s],[2,A.m]]),s.Ab(1073742336,p,p,[]),s.Ab(1024,A.k,(function(){return[[{path:"",component:d}]]}),[])])}))}}]);