(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{i8nU:function(e,t,n){"use strict";n.r(t);var a=n("CcnG"),o=n("mrSG"),i=n("ZZ/e"),r=n("Z22J"),s=n("ZLgM"),c=function(e){function t(t){var n=e.call(this,t.scene,t.x,t.y,"polaroid")||this;return n.round=t.scene.round,n.getImage=t.scene.getImage,n.x=n.scene.cameras.main.centerX,n.y=Math.round(n.displayHeight/2+.05*n.scene.game.canvas.height),n.displayHeight=.5*n.scene.game.canvas.height,n.scaleX=n.scaleY,n.setOrigin(.495,.449),n.tweenIn=function(){return n.scene.tweens.add({paused:!0,targets:n,x:{from:function(){return s.Math.Between(0,n.scene.game.canvas.width)},to:n.scene.cameras.main.centerX},y:{from:n.scene.game.canvas.height+n.displayHeight,to:Math.round(n.displayHeight/2+.05*n.scene.game.canvas.height)},angle:{from:function(){return s.Math.Between(100,250)},to:function(){return s.Math.Between(0,10)}},ease:"Cubic.InOut",duration:1e3})},n.tweenOut=function(){return n.scene.tweens.add({paused:!0,targets:n,x:{start:n.scene.cameras.main.centerX,from:n.scene.cameras.main.centerX,to:-n.scene.game.canvas.width},ease:"Cubic.InOut",duration:500,onUpdate:function(){n.getImage().x=n.x,n.getImage().y=n.y}})},t.scene.add.existing(n),n}return o.d(t,e),t}(s.GameObjects.Sprite),u=function(e){function t(t){var n=e.call(this,t.scene,t.x,t.y,null)||this;return n.setActive(!1),n.getPolaroid=t.scene.getPolaroid,n.getButtons=t.scene.getButtons,n.getRound=t.scene.getRound,n.displayHeight=.4*n.scene.game.canvas.height,n.scaleX=n.scaleY,n.setOrigin(.5),n.alpha=0,n.tweenIn=function(){return n.scene.tweens.add({paused:!0,targets:n,alpha:{from:0,to:1},ease:"Cubic.InOut",duration:500,onStart:function(){n.setTexture("image_"+n.getRound()),n.displayHeight=.4*n.scene.game.canvas.height,n.scaleX=n.scaleY},onUpdate:function(){n.angle=n.getPolaroid().angle,n.x=n.getPolaroid().x,n.y=n.getPolaroid().y}})},t.scene.add.existing(n),n}return o.d(t,e),t}(s.GameObjects.Sprite),l=n("+TmL"),d=function(e){function t(t){var n=e.call(this,t.scene,t.x,t.y,"alternative")||this;return t.scene.add.existing(n),n.getButtons=t.scene.getButtons,n.roundData=t.scene.roundData,n.getMainState=t.scene.getMainState,n.getBtnText=t.scene.getBtnText,n.round=t.scene.round,n.index=t.index,n.setMainState=t.scene.setMainState,n.isAnswer=function(){return t.scene.btnIsAnswer(n.index)},n.scaleText=function(){n.text.displayWidth>=n.displayWidth?(n.text.displayWidth=n.displayWidth-.1*n.displayWidth,n.text.scaleY=n.text.scaleX):n.text.scale=n.scale},n.setVisible(!1),n.setScale(0),n.setInteractive(),n.setOrigin(.5),n.text=n.scene.make.text({add:!0,x:n.x,y:n.y,origin:.5,scale:0,text:"",style:{fontSize:"48px",fontFamily:"Source Sans Pro",color:"#000000",align:"center"}}),n.tweenIn=function(){return n.scene.tweens.add({paused:!0,targets:n,displayWidth:{from:0,to:Math.round(.45*n.scene.game.canvas.width)},displayHeight:{from:0,to:Math.round(.1*n.scene.game.canvas.height)},ease:"Back.Out",delay:100,duration:500,onStart:function(){n.setVisible(!0),n.clearTint(),n.scale=0,n.alpha=1,n.text.scale=0,n.text.alpha=1,n.text.text=n.getBtnText(n.index)},onUpdate:function(){return n.scaleText()}})},n.tweenOut=function(e){return n.scene.tweens.add({targets:[n,n.text],paused:!0,alpha:{from:1,to:0},ease:"Cubic.Out",delay:e,duration:500,onComplete:function(){return n.emit("complete")}})},n.tweenCorrect=function(){return n.scene.tweens.add({targets:n,paused:!0,scaleX:{from:n.scaleX,to:1.1*n.scaleX},scaleY:{from:n.scaleY,to:1.1*n.scaleY},ease:"Cubic.Out",delay:n.delay,duration:200,yoyo:!0,onUpdate:function(){return n.scaleText()}})},n.on("pointerdown",(function(){"guessing"==n.getMainState()&&(n.setMainState(1),n.emit("answer",n.isAnswer(),n))})),n}return o.d(t,e),t}(s.GameObjects.Sprite),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.category="mat",t.state=1,t.round=0,t.correctAnswers=0,t.rounds=5,t.states={1:"loading",2:"guessing"},t.roundData=Object(l.j)(t.category,[],l.e,t.rounds),t.setMainState=function(e){return t.state=e},t.getMainState=function(){return t.states[t.state]},t.getPolaroid=function(){return t.polaroid},t.getImage=function(){return t.image},t.getRound=function(){return t.round},t.getButtons=function(){return t.buttons},t.getBtnText=function(e){return t.roundData[t.round].alternatives[e]},t.btnIsAnswer=function(e){return t.roundData[t.round].alternatives[e]===t.roundData[t.round].answer},t}return o.d(t,e),t.prototype.preload=function(){var e=this;this.load.image("alternative","assets/img/alternative.png"),this.load.image("background","assets/img/games/match/bg.png"),this.load.image("polaroid","assets/img/games/match/polaroid.png"),this.roundData.forEach((function(t,n){return e.load.image("image_"+n,"assets/img/games/images/"+e.category+"/"+t.src)}))},t.prototype.init=function(){this.cameras.main.setBackgroundColor("#24252A")},t.prototype.create=function(){var e=this;this.rounds=this.roundData.length,this.bgSprite=this.add.tileSprite(0,0,this.game.canvas.width*window.devicePixelRatio,this.game.canvas.height*window.devicePixelRatio,"background"),this.buttons=this.loadButtons(),this.polaroid=new c({scene:this,x:0,y:0}),this.image=new u({scene:this,x:0,y:0}),this.startRound(),console.log("starting round with complexity: "+l.e),window.restartScene=function(){e.round=0,e.correctAnswers=0,e.roundData.forEach((function(t,n){return e.textures.remove("image_"+n)})),e.roundData=Object(l.j)(e.category,[],l.e,e.rounds),e.roundData.forEach((function(t,n){return e.load.image("image_"+n,"assets/img/games/images/"+e.category+"/"+t.src)})),e.scene.restart()}},t.prototype.update=function(){},t.prototype.startRound=function(){this.round<this.roundData.length?this.loadTweenChain():(Object(l.d)(this.correctAnswers,this.rounds,"lese"),console.log("Round ended with: "+this.correctAnswers+" of "+this.rounds+" correct answers."),document.getElementById("goBackBtn").click())},t.prototype.loadTweenChain=function(){var e=this,t=this.polaroid.tweenIn(),n=this.image.tweenIn(),a=this.buttons.map((function(e){return e.tweenIn()})),o=this.buttons.filter((function(e){return e.isAnswer()}))[0],i=this.polaroid.tweenOut();console.log(this.buttons,o,this.buttons.filter((function(e){return e.isAnswer()}))),t.once("complete",(function(){return n.play()})),n.once("complete",(function(){return a.forEach((function(e){return e.play()}))})),a.forEach((function(t){return t.once("complete",(function(){return e.state=2}))})),o.once("complete",(function(){return i.play()})),i.once("complete",(function(){e.round++,e.startRound()})),t.play()},t.prototype.loadButtons=function(){for(var e=this,t=[],n=0;n<4;n++){var a=Math.round(this.cameras.main.centerY+this.cameras.main.centerY/2);n>1&&(a+=Math.round(.12*this.game.canvas.height));var o=n%2?Math.round(this.cameras.main.centerX+this.cameras.main.centerX/2):Math.round(this.cameras.main.centerX-this.cameras.main.centerX/2),i=new d({scene:this,x:o,y:a,index:n});i.on("answer",(function(t,n){t?(e.correctAnswers++,n.tweenCorrect().play(),n.setTint(4713267)):(n.setTint(15419187),e.buttons.forEach((function(e){e.isAnswer()&&(e.setTint(4713267),e.tweenCorrect().play())}))),e.buttons.forEach((function(e,t){n===e||e.isAnswer()?e.tweenOut(3e3).play():e.tweenOut(200).play()}))})),t.push(i)}return t},t}(s.Scene),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.preload=function(){},t.prototype.init=function(){},t.prototype.create=function(){console.log("loaded highscore")},t.prototype.update=function(){},t}(s.Scene),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.create=function(){this.scene.add("highscore",g,!1),this.scene.add("main",h,!0)},t.prototype.pause=function(){this.scene.pause()},t}(s.Scene),f=function(){function e(e,t){this.popoverController=e,this.navCtrl=t,this.initialize=!0,this.game={width:"100%",height:"100%",type:s.WEBGL,scene:p,instance:null,fps:{target:60,min:60,forceSetTimeOut:!0}}}return e.prototype.presentPopover=function(){return o.b(this,void 0,void 0,(function(){return o.e(this,(function(e){switch(e.label){case 0:return[4,this.popoverController.create({component:r.a})];case 1:return[4,e.sent().present()];case 2:return[2,e.sent()]}}))}))},e.prototype.getInstance=function(){return this.game.instance},e.prototype.goBack=function(){this.navCtrl.back()},e.prototype.pauseGame=function(){this.getInstance().scene.pause("FirstScene")},e.prototype.changeAngle=function(){this.getInstance().scene.scenes.forEach((function(e){e.sys.isActive()&&e.setAngle(0)}))},e}(),m=function(){return function(){}}(),b=n("pMnS"),y=n("oBZk"),w=a.qb({encapsulation:0,styles:[[""]],data:{}});function v(e){return a.Ib(0,[(e()(),a.sb(0,0,null,null,0,"div",[["hidden",""],["id","goBackBtn"],["style",""]],null,[[null,"click"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==e.component.goBack()&&a),a}),null,null)),(e()(),a.sb(1,0,null,null,0,"ion-phaser",[],[[8,"game",0],[8,"initialize",0],[8,"goBack",0]],null,null,null,null)),(e()(),a.sb(2,0,null,null,3,"ion-fab",[["horizontal","end"],["vertical","top"]],null,null,null,y.D,y.i)),a.rb(3,49152,null,0,i.u,[a.h,a.k,a.z],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(e()(),a.sb(4,0,null,0,1,"ion-icon",[["color","light"],["name","pause"],["style","font-size: 25px;"]],null,[[null,"click"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==e.component.presentPopover()&&a),a}),y.G,y.l)),a.rb(5,49152,null,0,i.A,[a.h,a.k,a.z],{color:[0,"color"],name:[1,"name"]},null)],(function(e,t){e(t,3,0,"end","top"),e(t,5,0,"light","pause")}),(function(e,t){var n=t.component;e(t,1,0,n.game,n.initialize,n.goBack)}))}function x(e){return a.Ib(0,[(e()(),a.sb(0,0,null,null,1,"app-match",[],null,null,null,v,w)),a.rb(1,49152,null,0,f,[i.Hb,i.Fb],null,null)],null,null)}var C=a.ob("app-match",f,x,{},{},[]),B=a.qb({encapsulation:0,styles:[[""]],data:{}});function I(e){return a.Ib(0,[(e()(),a.sb(0,0,null,null,3,"ion-text",[],null,null,null,y.O,y.t)),a.rb(1,49152,null,0,i.vb,[a.h,a.k,a.z],null,null),(e()(),a.sb(2,0,null,0,1,"h4",[],null,null,null,null,null)),(e()(),a.Hb(-1,null,["This is a test"]))],null,null)}function S(e){return a.Ib(0,[(e()(),a.sb(0,0,null,null,1,"app-game-menu",[],null,null,null,I,B)),a.rb(1,114688,null,0,r.a,[i.Hb],null,null)],(function(e,t){e(t,1,0)}),null)}var k=a.ob("app-game-menu",r.a,S,{},{},[]),M=n("Ip0R"),O=n("gIcY"),A=n("ZYCi");n.d(t,"MatchPageModuleNgFactory",(function(){return T}));var T=a.pb(m,[],(function(e){return a.Bb([a.Cb(512,a.j,a.ab,[[8,[b.a,C,k]],[3,a.j],a.x]),a.Cb(4608,M.k,M.j,[a.u,[2,M.r]]),a.Cb(4608,O.c,O.c,[]),a.Cb(4608,i.a,i.a,[a.z,a.g]),a.Cb(4608,i.Eb,i.Eb,[i.a,a.j,a.q]),a.Cb(4608,i.Hb,i.Hb,[i.a,a.j,a.q]),a.Cb(1073742336,M.b,M.b,[]),a.Cb(1073742336,O.b,O.b,[]),a.Cb(1073742336,O.a,O.a,[]),a.Cb(1073742336,i.Cb,i.Cb,[]),a.Cb(1073742336,A.n,A.n,[[2,A.s],[2,A.m]]),a.Cb(1073742336,m,m,[]),a.Cb(1024,A.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);